<% include ../includes/head %>
    </head>
    <body>
        <% include ../includes/navigation %>
        <main>
            <% include ../includes/messageFlash %>
            <div class="row">
                <% if(votes.length == 0) { %>
                <div class="d-flex justify-content-center w-100">
                    <h5 class="alert alert-info my-5"> Aucun vote n'est disponible pour le moment ! </h5>
                </div>
                <% } else { %>
                    <% votes.forEach(vote => { %>
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <p class="text-center">
                                            <b><%= vote.subject %></b> <br>
                                            <small>
                                                By <% if (vote.createdBy != null) { %>
                                                <%= vote.createdBy.login %> <br> Status : <%= vote.status %>
                                                <% } %>
                                            </small>
                                        </p>
                                        <div class="d-flex w-100 justify-content-end">
                                            <% if (vote.status == 'finished') { %>
                                            <a href="/dashboard/result/<%= vote._id %>">Voir le r√©sultat</a>
                                            <% } else { %>
                                            <p class="text-right"> <%= vote.participants.length %> / <%= vote.quota %> Participants </p>
                                            <% } %>
                                        </div>
                                        <div class="progress">
                                            <% var vot = vote.participants.length/vote.quota*100 %>
                                            <div class="progress-bar bg-warning" role="progressbar" style="width: <%= vot %>%;"
                                                aria-valuenow="<%= vot %>" aria-valuemin="0" aria-valuemax="100"> <%=  Math.round(vot) %>%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    <% }) %>
                <% } %>
            </div>
        </main>
        <% include ../includes/footer %>
        <% include ../includes/modals %>
        <script src="/js/script.js"></script>
    </body>
</html>